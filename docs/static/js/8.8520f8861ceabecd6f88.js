webpackJsonp([8],{umwc:function(t,e){},yTGp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),n=a("7t+N"),o=a.n(n),c=a("NYxO"),r=a("UzLt"),l=a("S8yE"),u={name:"edit",components:{vHeader:r.a,vAlert:l.a},data:function(){return{show:!1,message:"",title:"",tab:"share",content:"",topic_id:this.$route.params.id}},computed:s()({},Object(c.b)(["user"])),created:function(){this.getTopicDetail()},methods:{modifyIssue:function(){var t=this;if(this.title.length<=10)this.tip("标题字数10字以上");else if(this.content.length){o.a.post("https://cnodejs.org/api/v1/topics/update",{accesstoken:this.user.accessToken,title:this.title,tab:this.tab,content:this.content,topic_id:this.topic_id}).then(function(e){e.success&&(t.tip("主题修改成功"),setTimeout(function(){t.$router.push("/?tab="+t.tab)},2e3))}).catch(function(){t.tip("阿欧~,服务器抽风了!")})}else this.tip("主题内容不能为空")},tip:function(t){var e=this,a=null;clearTimeout(a),this.message=t,this.show=!0,a=setTimeout(function(){e.show=!1},2e3)},getTopicDetail:function(){var t=this,e="https://cnodejs.org/api/v1/topic/"+this.$route.params.id+"?mdrender=false";o.a.get(e).then(function(e){e.success&&(t.title=e.data.title,t.tab=e.data.tab,t.content=e.data.content)})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("v-header",{attrs:{head:"编辑主题"}}),t._v(" "),a("div",{staticClass:"line"},[a("span",[t._v("选择分类: ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tab,expression:"tab"}],attrs:{id:"select-tab"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.tab=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"share"}},[t._v("分享")]),t._v(" "),a("option",{attrs:{value:"ask"}},[t._v("问答")]),t._v(" "),a("option",{attrs:{value:"job"}},[t._v("招聘")]),t._v(" "),a("option",{attrs:{value:"dev"}},[t._v("测试")])]),t._v(" "),a("button",{attrs:{id:"issue"},on:{click:t.modifyIssue}},[t._v("提交")])]),t._v(" "),a("div",{staticClass:"title"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"标题,字数10字以上"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"content"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"支持Markdown语法,请注意标记代码"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),a("v-alert",{attrs:{show:t.show,text:t.message}})],1)},staticRenderFns:[]};var d=a("VU/8")(u,v,!1,function(t){a("umwc")},null,null);e.default=d.exports}});
//# sourceMappingURL=8.8520f8861ceabecd6f88.js.map