{"version":3,"sources":["webpack:///src/views/login.vue","webpack:///./src/views/login.vue?ac53","webpack:///./src/views/login.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["views_login","name","components","vHeader","v_header","vAlert","v_alert","data","show","message","accessToken","num","computed","extends_default","Object","vuex_esm","created","_this","this","user","id","timer","clearInterval","setInterval","$router","push","methods","login","_this2","jquery_default","a","post","accesstoken","trim","then","res","success","loginname","avatar","avatar_url","window","localStorage","stringify_default","$store","dispatch","path","$route","query","origin","decodeURIComponent","catch","e","tip","responseJSON","error_msg","_this3","clearTimeout","setTimeout","selectortype_template_index_0_src_views_login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","head","directives","rawName","value","expression","type","placeholder","domProps","on","input","$event","target","composing","click","text","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"mOAuBAA,GACAC,KAAA,QACAC,YACAC,QAAAC,EAAA,EAAAC,OAAAC,EAAA,GAEAC,KALA,WAMA,OACAC,MAAA,EACAC,QAAA,GACAC,YAAA,GACAC,IAAA,IAGAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EAAA,UAEAE,QAhBA,WAgBA,IAAAC,EAAAC,KACA,GAAAA,KAAAC,KAAAC,GAAA,CACA,IAAAC,EAAA,KACAC,cAAAD,GACAA,EAAAE,YAAA,WACAN,EAAAN,MACA,IAAAM,EAAAN,MACAW,cAAAD,GACAJ,EAAAO,QAAAC,KAAA,OAEA,OAGAC,SACAC,MADA,WACA,IAAAC,EAAAV,KAEAA,KAAAR,YAGQmB,EAAAC,EAARC,KAJA,0CAKAC,YAAAd,KAAAR,YAAAuB,SACAC,KAAA,SAAAC,GACA,GAAAA,EAAAC,QAAA,CACA,IAAAjB,GACAC,GAAAe,EAAAf,GACAnB,KAAAkC,EAAAE,UACAC,OAAAH,EAAAI,WACA7B,YAAAkB,EAAAlB,YAAAuB,QAGAO,OAAAC,aAAAtB,KAAAuB,IAAAvB,GAEAS,EAAAe,OAAAC,SAAA,UAAAzB,GAEA,IAAA0B,EAAAjB,EAAAkB,OAAAC,MAAAC,OAAAC,mBAAArB,EAAAkB,OAAAC,MAAAC,QAAA,IACApB,EAAAJ,QAAAC,KAAAoB,MAEAK,MAAA,SAAAC,GACAvB,EAAAwB,IAAAD,EAAAE,aAAAC,aArBApC,KAAAkC,IAAA,qBAyBAA,IA7BA,SA6BA3C,GAAA,IAAA8C,EAAArC,KACAG,EAAA,KACAmC,aAAAnC,GACAH,KAAAT,UACAS,KAAAV,MAAA,EACAa,EAAAoC,WAAA,WACAF,EAAA/C,MAAA,GACA,QCrFekD,GADEC,OAFjB,WAA0B,IAAAC,EAAA1C,KAAa2C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBL,EAAAzC,KAAA,IAAA4C,EAAA,KAAAH,EAAAM,GAAA,0BAAAN,EAAAM,GAAA,KAAAH,EAAA,KAAAA,EAAA,QAAAH,EAAAM,GAAAN,EAAAO,GAAAP,EAAAjD,QAAAiD,EAAAM,GAAA,cAAAH,EAAA,YAAuJK,OAAOC,KAAA,QAAaT,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,cAAwBF,EAAA,SAAcO,aAAarE,KAAA,QAAAsE,QAAA,UAAAC,MAAAZ,EAAA,YAAAa,WAAA,gBAAgFL,OAASM,KAAA,OAAAC,YAAA,gBAA2CC,UAAWJ,MAAAZ,EAAA,aAA0BiB,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCrB,EAAAlD,YAAAqE,EAAAC,OAAAR,WAAsCZ,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,YAAAY,IAA4BK,MAAAtB,EAAAjC,SAAmBiC,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,WAA8CK,OAAOe,KAAAvB,EAAAnD,QAAAD,KAAAoD,EAAApD,UAAoC,IAEtxB4E,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvF,EACA0D,GATF,EAVA,SAAA8B,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB,8BC1BhCK,EAAAC,SAAkBC,QAAYN,EAAQ,QAAmCO,YAAA,yBCAzE,IAAAC,EAAWR,EAAQ,QACnBS,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,YACvCP,EAAAC,QAAA,SAAAO,GACA,OAAAH,EAAAE,UAAAE,MAAAJ,EAAAK","file":"static/js/2.9867f33bd045e12f711f.js","sourcesContent":["<template>\n  <div class=\"login\">\n    <template v-if=\"user.id\">\n      <p>您已登录,若要更换账号,请退出重新登录.</p>\n      <p><span>{{num}}</span>秒后返回首页</p>\n    </template>\n    <template v-else>\n      <v-header head=\"登录\"></v-header>\n      <div class=\"login-box\">\n        <input type=\"text\" v-model=\"accessToken\" placeholder=\"access token\">\n        <div class=\"login-btn\" @click=\"login\">登 录</div>\n      </div>\n      <v-alert :text=\"message\" :show=\"show\"></v-alert>\n    </template>\n  </div>\n</template>\n\n<script>\n  import $ from 'jquery'\n  import {mapState} from 'vuex'\n  import vHeader from '../components/v-header'\n  import vAlert from '../components/v-alert'\n\n  export default {\n    name: \"login\",\n    components: {\n      vHeader, vAlert\n    },\n    data() {\n      return {\n        show: false,\n        message: '',\n        accessToken: '',\n        num: 3\n      }\n    },\n    computed: {\n      ...mapState(['user'])\n    },\n    created() {\n      if (this.user.id) {\n        var timer = null\n        clearInterval(timer)\n        timer = setInterval(() => {\n          this.num--\n          if (this.num === 0) {\n            clearInterval(timer)\n            this.$router.push('/')\n          }\n        }, 1000)\n      }\n    },\n    methods: {\n      login() {\n        var url = `https://cnodejs.org/api/v1/accesstoken`\n        if (!this.accessToken) {\n          this.tip('access token不能为空')\n        } else {\n          $.post(url, {\n            accesstoken: this.accessToken.trim()\n          }).then((res) => {\n            if (res.success) {\n              var user = {\n                id: res.id,\n                name: res.loginname,\n                avatar: res.avatar_url,\n                accessToken: this.accessToken.trim()\n              }\n              // 本地记录记录信息\n              window.localStorage.user = JSON.stringify(user)\n              // 存储到vuex中\n              this.$store.dispatch('setUser', user)\n\n              var path = this.$route.query.origin ? decodeURIComponent(this.$route.query.origin) : \"/\"\n              this.$router.push(path)\n            }\n          }).catch((e) => {\n            this.tip(e.responseJSON.error_msg)\n          })\n        }\n      },\n      tip(message) {\n        var timer = null\n        clearTimeout(timer)\n        this.message = message\n        this.show = true\n        timer = setTimeout(() => {\n          this.show = false\n        }, 2000)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"../common/scss/var\";\n\n  .login {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #f0f0f0;\n    p {\n      text-align: center;\n      margin-top: 10px;\n      font-size: 16px;\n    }\n    .login-box {\n      position: absolute;\n      top: 45%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 80%;\n      /*height: 88px;*/\n      /*background: red;*/\n      input[type=text] {\n        width: 100%;\n        height: 44px;\n        padding: 0 10px;\n        border-radius: 4px;\n      }\n      .login-btn {\n        margin-top: 10px;\n        height: 44px;\n        border-radius: 4px;\n        background: $color-theme;\n        text-align: center;\n        line-height: 44px;\n        font-size: 16px;\n        color: #fff;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[(_vm.user.id)?[_c('p',[_vm._v(\"您已登录,若要更换账号,请退出重新登录.\")]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(_vm._s(_vm.num))]),_vm._v(\"秒后返回首页\")])]:[_c('v-header',{attrs:{\"head\":\"登录\"}}),_vm._v(\" \"),_c('div',{staticClass:\"login-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accessToken),expression:\"accessToken\"}],attrs:{\"type\":\"text\",\"placeholder\":\"access token\"},domProps:{\"value\":(_vm.accessToken)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.accessToken=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"login-btn\",on:{\"click\":_vm.login}},[_vm._v(\"登 录\")])]),_vm._v(\" \"),_c('v-alert',{attrs:{\"text\":_vm.message,\"show\":_vm.show}})]],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-661bf727\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-661bf727\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-661bf727\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 1 2","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 1 2"],"sourceRoot":""}