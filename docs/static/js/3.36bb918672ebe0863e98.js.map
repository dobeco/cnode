{"version":3,"sources":["webpack:///src/views/my-collection.vue","webpack:///./src/views/my-collection.vue?a6f5","webpack:///./src/views/my-collection.vue"],"names":["my_collection","name","components","vHeader","v_header","tag","data","collection","computed","extends_default","Object","vuex_esm","created","this","getLastTime","utils","getTagInfo","getCollection","updated","lazyLoad","jquery_default","window","scroll","methods","_this","url","user","a","get","then","res","success","each","totalHeight","pageYOffset","innerHeight","offsetTop","src","attr","goUser","loginname","$router","push","goTopic","topicId","views_my_collection","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head","_v","_l","item","on","click","$event","id","type","className","text","_s","title","__webpack_require__","data-src","author","avatar_url","width","height","stopPropagation","reply_count","visit_count","create_at","last_reply_at","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0NAoCAA,GACAC,KAAA,gBACAC,YACAC,QAAAC,EAAA,EAAAC,MAAA,GAEAC,KALA,WAMA,OACAC,gBAGAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EAAA,UAEAE,QAbA,WAcAC,KAAAC,YAAAC,EAAA,EACAF,KAAAG,WAAAD,EAAA,EAEAF,KAAAI,iBAEAC,QAnBA,WAoBAL,KAAAM,WACIC,IAAJC,QAAAC,OAAAT,KAAAM,WAEAI,SACAN,cADA,WACA,IAAAO,EAAAX,KACAY,EAAA,4CAAAZ,KAAAa,KAAAzB,KACMmB,EAAAO,EAANC,IAAAH,GAAAI,KAAA,SAAAC,GACAA,EAAAC,UACAP,EAAAjB,WAAAuB,EAAAxB,SAKAa,SAVA,WAWMC,IAAN,4BAAAY,KAAA,WACA,IAAAC,EAAAZ,OAAAa,YAAAb,OAAAc,YACAtB,KAAAuB,WAAAH,IACApB,KAAAwB,IAAAjB,IAAAP,MAAAyB,KAAA,gBAIAC,OAlBA,SAkBAC,GACA3B,KAAA4B,QAAAC,KAAA,SAAAF,IAEAG,QArBA,SAqBAC,GACA/B,KAAA4B,QAAAC,KAAA,UAAAE,MC9EeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAlC,KAAamC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,YAAiBG,OAAOC,KAAA,UAAeP,EAAAQ,GAAA,KAAAR,EAAAxC,WAAA,OAAA2C,EAAA,MAA+CE,YAAA,mBAA8BL,EAAAS,GAAAT,EAAA,oBAAAU,GAAwC,OAAAP,EAAA,MAAgBQ,IAAIC,MAAA,SAAAC,GAAyBb,EAAAJ,QAAAc,EAAAI,QAAuBX,EAAA,MAAWE,YAAA,UAAoBF,EAAA,OAAYG,OAAOS,KAAAf,EAAA/B,WAAAyC,GAAAM,UAAAC,KAAAjB,EAAA/B,WAAAyC,GAAAO,QAAwEjB,EAAAQ,GAAA,KAAAL,EAAA,QAAyBE,YAAA,SAAmBL,EAAAQ,GAAAR,EAAAkB,GAAAR,EAAAS,WAAA,GAAAnB,EAAAQ,GAAA,KAAAL,EAAA,OAAyDE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,SAAAC,OAA4BhB,IAAM8B,EAAQ,QAAqCC,WAAAX,EAAAY,OAAAC,WAAAC,MAAA,KAAAC,OAAA,MAA+Dd,IAAKC,MAAA,SAAAC,GAAyBA,EAAAa,kBAAyB1B,EAAAR,OAAAkB,EAAAY,OAAA7B,eAAoCO,EAAAQ,GAAA,KAAAL,EAAA,OAAwBE,YAAA,SAAmBF,EAAA,KAAAA,EAAA,QAAqBE,YAAA,SAAmBL,EAAAQ,GAAAR,EAAAkB,GAAAR,EAAAY,OAAA7B,cAAAO,EAAAQ,GAAA,KAAAL,EAAA,QAAAA,EAAA,KAAAH,EAAAQ,GAAAR,EAAAkB,GAAAR,EAAAiB,gBAAA3B,EAAAQ,GAAA,KAAAR,EAAAkB,GAAAR,EAAAkB,kBAAA5B,EAAAQ,GAAA,KAAAL,EAAA,KAAAA,EAAA,QAAAH,EAAAQ,GAAAR,EAAAkB,GAAAlB,EAAAjC,YAAA2C,EAAAmB,eAAA7B,EAAAQ,GAAA,KAAAL,EAAA,QAAAH,EAAAQ,GAAAR,EAAAkB,GAAAlB,EAAAjC,YAAA2C,EAAAoB,8BAA4T9B,EAAA+B,MAAA,IAE9sCC,oBCCjB,IAcAC,EAdyBb,EAAQ,OAcjCc,CACEjF,EACA6C,GATF,EAVA,SAAAqC,GACEf,EAAQ,SAaV,KAEA,MAUegB,EAAA,QAAAH,EAAiB","file":"static/js/3.36bb918672ebe0863e98.js","sourcesContent":["<template>\n  <div class=\"my-collection\">\n    <v-header head=\"我的收藏\"></v-header>\n    <ul class=\"collection-list\" v-if=\"collection.length\">\n      <li v-for=\"item in collection\" @click=\"goTopic(item.id)\">\n        <h2 class=\"title\">\n          <tag :type=\"getTagInfo(item).className\" :text=\"getTagInfo(item).text\"></tag>\n          <span class=\"text\">{{item.title}}</span>\n        </h2>\n        <div class=\"content\">\n          <img src=\"../common/image/default_avatar.jpeg\" :data-src=\"item.author.avatar_url\" width=\"40\" height=\"40\"\n               class=\"avatar\" @click.stop=\"goUser(item.author.loginname)\">\n          <div class=\"info\">\n            <p>\n              <span class=\"name\">{{item.author.loginname}}</span>\n              <span><b>{{item.reply_count}}</b> /{{item.visit_count}}</span>\n            </p>\n            <p>\n              <time>{{getLastTime(item.create_at)}}</time>\n              <time>{{getLastTime(item.last_reply_at)}}</time>\n            </p>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n  import $ from 'jquery'\n  import {getLastTime, getTagInfo} from '../common/js/utils'\n  import {mapState} from 'vuex'\n\n  import vHeader from '../components/v-header'\n  import tag from '../components/tag'\n\n  export default {\n    name: \"my-collection\",\n    components: {\n      vHeader, tag\n    },\n    data() {\n      return {\n        collection: []\n      }\n    },\n    computed: {\n      ...mapState(['user'])\n    },\n    created() {\n      this.getLastTime = getLastTime\n      this.getTagInfo = getTagInfo\n\n      this.getCollection()\n    },\n    updated(){\n      this.lazyLoad()\n      $(window).scroll(this.lazyLoad)\n    },\n    methods: {\n      getCollection() {\n        var url = `https://cnodejs.org/api/v1/topic_collect/${this.user.name}`\n        $.get(url).then((res) => {\n          if (res.success) {\n            this.collection = res.data\n          }\n        })\n      },\n      // 图片懒加载\n      lazyLoad() {\n        $('.collection-list .avatar').each(function () {\n          var totalHeight = window.pageYOffset + window.innerHeight\n          if (this.offsetTop <= totalHeight) {\n            this.src = $(this).attr('data-src')\n          }\n        })\n      },\n      goUser(loginname) {\n        this.$router.push(`/user/${loginname}`)\n      },\n      goTopic(topicId) {\n        this.$router.push(`/topic/${topicId}`)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"../common/scss/var\";\n\n  .my-collection {\n    padding-top: 44px;\n    background: #fff;\n    .collection-list {\n      li {\n        margin: 0 15px;\n        padding: 10px 0;\n        border-bottom: $border;\n        &:last-child {\n          border-bottom: none;\n        }\n        .title {\n          display: flex;\n          align-items: center;\n          .text {\n            margin-left: 10px;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            font-weight: bold;\n            font-size: 16px;\n          }\n        }\n        .content {\n          display: flex;\n          align-items: center;\n          margin-top: 10px;\n          .avatar {\n            border-radius: 50%;\n          }\n          .info {\n            margin-left: 10px;\n            flex: 1;\n            p {\n              display: flex;\n              align-items: center;\n              justify-content: space-between;\n              span > b {\n                color: $color-theme;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my-collection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-collection\"},[_c('v-header',{attrs:{\"head\":\"我的收藏\"}}),_vm._v(\" \"),(_vm.collection.length)?_c('ul',{staticClass:\"collection-list\"},_vm._l((_vm.collection),function(item){return _c('li',{on:{\"click\":function($event){_vm.goTopic(item.id)}}},[_c('h2',{staticClass:\"title\"},[_c('tag',{attrs:{\"type\":_vm.getTagInfo(item).className,\"text\":_vm.getTagInfo(item).text}}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(item.title))])],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":require(\"../common/image/default_avatar.jpeg\"),\"data-src\":item.author.avatar_url,\"width\":\"40\",\"height\":\"40\"},on:{\"click\":function($event){$event.stopPropagation();_vm.goUser(item.author.loginname)}}}),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('p',[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.author.loginname))]),_vm._v(\" \"),_c('span',[_c('b',[_vm._v(_vm._s(item.reply_count))]),_vm._v(\" /\"+_vm._s(item.visit_count))])]),_vm._v(\" \"),_c('p',[_c('time',[_vm._v(_vm._s(_vm.getLastTime(item.create_at)))]),_vm._v(\" \"),_c('time',[_vm._v(_vm._s(_vm.getLastTime(item.last_reply_at)))])])])])])})):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1eb6122\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/my-collection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f1eb6122\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./my-collection.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-collection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-collection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1eb6122\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./my-collection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my-collection.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}