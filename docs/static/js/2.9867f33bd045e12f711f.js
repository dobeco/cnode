webpackJsonp([2],{"0EHO":function(e,t){},Quw4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("mvHQ"),o=s.n(n),a=s("Dd8w"),r=s.n(a),i=s("7t+N"),c=s.n(i),u=s("NYxO"),l=s("UzLt"),v=s("S8yE"),d={name:"login",components:{vHeader:l.a,vAlert:v.a},data:function(){return{show:!1,message:"",accessToken:"",num:3}},computed:r()({},Object(u.b)(["user"])),created:function(){var e=this;if(this.user.id){var t=null;clearInterval(t),t=setInterval(function(){e.num--,0===e.num&&(clearInterval(t),e.$router.push("/"))},1e3)}},methods:{login:function(){var e=this;this.accessToken?c.a.post("https://cnodejs.org/api/v1/accesstoken",{accesstoken:this.accessToken.trim()}).then(function(t){if(t.success){var s={id:t.id,name:t.loginname,avatar:t.avatar_url,accessToken:e.accessToken.trim()};window.localStorage.user=o()(s),e.$store.dispatch("setUser",s);var n=e.$route.query.origin?decodeURIComponent(e.$route.query.origin):"/";e.$router.push(n)}}).catch(function(t){e.tip(t.responseJSON.error_msg)}):this.tip("access token不能为空")},tip:function(e){var t=this,s=null;clearTimeout(s),this.message=e,this.show=!0,s=setTimeout(function(){t.show=!1},2e3)}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[e.user.id?[s("p",[e._v("您已登录,若要更换账号,请退出重新登录.")]),e._v(" "),s("p",[s("span",[e._v(e._s(e.num))]),e._v("秒后返回首页")])]:[s("v-header",{attrs:{head:"登录"}}),e._v(" "),s("div",{staticClass:"login-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.accessToken,expression:"accessToken"}],attrs:{type:"text",placeholder:"access token"},domProps:{value:e.accessToken},on:{input:function(t){t.target.composing||(e.accessToken=t.target.value)}}}),e._v(" "),s("div",{staticClass:"login-btn",on:{click:e.login}},[e._v("登 录")])]),e._v(" "),s("v-alert",{attrs:{text:e.message,show:e.show}})]],2)},staticRenderFns:[]};var m=s("VU/8")(d,p,!1,function(e){s("0EHO")},null,null);t.default=m.exports},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var n=s("FeBl"),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}}});
//# sourceMappingURL=2.9867f33bd045e12f711f.js.map