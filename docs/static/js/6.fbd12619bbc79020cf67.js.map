{"version":3,"sources":["webpack:///src/views/topic.vue","webpack:///./src/views/topic.vue?1106","webpack:///./src/views/topic.vue"],"names":["topic","name","components","vHeader","v_header","tag","vAlert","v_alert","data","commentContent","replyContent","show","message","reply_id","computed","extends_default","Object","vuex_esm","created","this","getLastTime","utils","getTagInfo","getTopicDetail","updated","_this","jquery_default","focus","lazyLoad","window","scroll","methods","_this2","url","$route","params","id","user","accessToken","a","get","then","res","success","catch","$router","push","each","totalHeight","pageYOffset","innerHeight","offsetTop","src","attr","collectTopic","_this3","is_collect","post","accesstoken","topic_id","comment","content","_this4","tip","trim","setTimeout","location","reload","e","responseJSON","error_msg","cancelComment","replyOthers","item","fullPath","author","loginname","cancelReplyOthers","ups","action","is_uped","pop","_this5","timer","clearTimeout","views_topic","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head","_v","_s","title","to","avatar_url","width","height","create_at","_e","class","cancel","on","click","type","className","text","visit_count","domProps","innerHTML","directives","rawName","value","expression","placeholder","input","$event","target","composing","replies","length","_l","index","__webpack_require__","data-src","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.fbd12619bbc79020cf67.js","sourcesContent":["<template>\n  <div class=\"topic\">\n    <v-header head=\"主题\"></v-header>\n    <template v-if=\"topic.id\">\n      <h2 class=\"title\">{{topic.title}}</h2>\n      <div class=\"author-info\">\n        <router-link :to=\"`/user/topic.author.loginname`\">\n          <img :src=\"topic.author.avatar_url\" width=\"40\" height=\"40\" class=\"avatar\">\n        </router-link>\n        <div class=\"center\">\n          <div class=\"base\">\n            <span class=\"name\">{{topic.author.loginname}}</span>\n            <span class=\"name\">{{getLastTime(topic.create_at)}}</span>\n          </div>\n          <router-link :to=\"`/topic/${topic.id}/edit`\" v-if=\"topic.author.loginname === user.name\" class=\"edit\">编辑\n          </router-link>\n        </div>\n        <div class=\"right\">\n          <button class=\"collect\"\n                  :class=\"{cancel:topic.is_collect}\"\n                  v-if=\"user.id\"\n                  @click=\"collectTopic\"\n          >{{topic.is_collect? '取消收藏':'收藏'}}\n          </button>\n          <div class=\"visit\">\n            <tag :type=\"getTagInfo(topic).className\" :text=\"getTagInfo(topic).text\"></tag>\n            <span>{{topic.visit_count}}次浏览</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"topic-content markdown-body\" v-html=\"topic.content\"></div>\n      <div class=\"comment-wrapper\" v-if=\"user.id\">\n        <div class=\"comment\">\n          <textarea id=\"textarea\" placeholder=\"写下你的评论...\" v-model=\"commentContent\"></textarea>\n          <div class=\"ctrl\">\n            <span class=\"cancel\" @click=\"cancelComment\">取消</span>\n            <button class=\"send\" @click=\"comment(0,commentContent)\">发送</button>\n          </div>\n        </div>\n      </div>\n      <template v-if=\"topic.replies.length\">\n        <h3><b>{{topic.replies.length}}</b> 回复</h3>\n        <ul class=\"reply-list\">\n          <li v-for=\"(item,index) in topic.replies\">\n            <div class=\"base\">\n              <router-link :to=\"`/user/${item.author.loginname}`\">\n                <img src=\"../common/image/default_avatar.jpeg\" :data-src=\"item.author.avatar_url\" width=\"40\" height=\"40\"\n                     class=\"avatar\">\n              </router-link>\n              <div class=\"center\">\n                <p class=\"author-name\">{{item.author.loginname}}</p>\n                <time>{{getLastTime(item.create_at)}}</time>\n              </div>\n              <span class=\"floor\">{{index+1}}楼</span>\n            </div>\n            <div class=\"markdown-body content\" v-html=\"item.content\"></div>\n            <div class=\"action\">\n              <span class=\"num\" :class=\"{is_uped:item.is_uped}\">{{item.ups.length?item.ups.length:''}}</span>\n              <i class=\"icon-awesome\" :class=\"{is_uped:item.is_uped}\" @click=\"ups(item)\"></i>\n              <i class=\"icon-reply\" @click=\"replyOthers(item)\"></i>\n            </div>\n            <transition name=\"comment\">\n              <div class=\"comment between\" v-if=\"reply_id === item.id\">\n                <textarea placeholder=\"写下你的回复...\" v-model=\"replyContent\"></textarea>\n                <div class=\"ctrl\">\n                  <span class=\"cancel\" @click=\"cancelReplyOthers\">取消</span>\n                  <button class=\"send\" @click=\"comment(item.id,replyContent)\">发送</button>\n                </div>\n              </div>\n            </transition>\n          </li>\n        </ul>\n      </template>\n      <p v-else class=\"no-reply\">暂无回复</p>\n    </template>\n    <v-alert :text=\"message\" :show=\"show\"></v-alert>\n  </div>\n</template>\n\n<script>\n  import $ from 'jquery'\n  import {mapState} from 'vuex'\n  import {getLastTime, getTagInfo} from '../common/js/utils'\n\n  import vHeader from '../components/v-header'\n  import tag from '../components/tag'\n  import vAlert from '../components/v-alert'\n\n  export default {\n    name: \"topic\",\n    components: {\n      vHeader,\n      tag,\n      vAlert\n    },\n    data() {\n      return {\n        topic: {},\n        commentContent: '',\n        replyContent: '',\n        show: false,\n        message: '',\n        reply_id: 0\n      }\n    },\n    computed: {\n      ...mapState(['user'])\n    },\n    created() {\n      this.getLastTime = getLastTime\n      this.getTagInfo = getTagInfo\n      this.getTopicDetail()\n    },\n    updated() {\n      $('#textarea').focus(() => {\n        this.reply_id = 0\n      })\n      this.lazyLoad()\n      $(window).scroll(this.lazyLoad)\n    },\n    methods: {\n      // 获取主题详情\n      getTopicDetail() {\n        var topicId = this.$route.params.id\n        var url = `https://cnodejs.org/api/v1/topic/${topicId}?mdrender=true&accesstoken=${this.user.accessToken}`\n        $.get(url).then((res) => {\n          // console.log(res)\n          if (res.success) {\n            this.topic = res.data\n          }\n        }).catch(() => {\n          this.$router.push('/404')\n        })\n      },\n      // 图片懒加载\n      lazyLoad() {\n        $('.reply-list .avatar').each(function () {\n          var totalHeight = window.pageYOffset + window.innerHeight\n          if (this.offsetTop <= totalHeight) {\n            this.src = $(this).attr('data-src')\n          }\n        })\n      },\n      // 收藏主题和取消收藏\n      collectTopic() {\n        if (!this.topic.is_collect) {\n          const url = `https://cnodejs.org/api/v1/topic_collect/collect`\n          $.post(url, {\n            accesstoken: this.user.accessToken,\n            topic_id: this.$route.params.id\n          }).then((res) => {\n            if (res.success) {\n              this.topic.is_collect = true\n            }\n          })\n        } else {\n          const url = `https://cnodejs.org/api/v1/topic_collect/de_collect`\n          $.post(url, {\n            accesstoken: this.user.accessToken,\n            topic_id: this.$route.params.id\n          }).then((res) => {\n            if (res.success) {\n              this.topic.is_collect = false\n            }\n          })\n        }\n      },\n\n      // 发表评论\n      comment(reply_id, content) {\n        var topicId = this.$route.params.id\n        var url = `https://cnodejs.org/api/v1/topic/${topicId}/replies`\n\n        if (!content) {\n          return this.tip('[评论/回复]内容不能为空')\n        }\n\n        $.post(url, {\n          accesstoken: this.user.accessToken,\n          content: content.trim(),\n          reply_id\n        }).then((res) => {\n          if (res.success) {\n            this.tip('[评论/回复]发表成功')\n            setTimeout(() => {\n              window.location.reload(true)\n            }, 2000)\n          }\n        }).catch((e) => {\n          this.tip(e.responseJSON.error_msg)\n        })\n      },\n      // 取消评论\n      cancelComment() {\n        this.commentContent = ''\n      },\n\n      // 回复别人\n      replyOthers(item) {\n        if (!this.user.id) {\n          return this.$router.push(`/login?origin=${this.$route.fullPath}`)\n        }\n\n        this.reply_id = item.id\n        this.replyContent = `@${item.author.loginname} `\n      },\n      // 取消回复别人\n      cancelReplyOthers() {\n        this.reply_id = 0\n        this.replyContent = ''\n      },\n\n      // 为评论点赞\n      ups(item) {\n        if (!this.user.id) {\n          return this.$router.push(`/login?origin=${this.$route.fullPath}`)\n        }\n\n        var url = `https://cnodejs.org/api/v1/reply/${item.id}/ups`\n\n        $.post(url, {\n          accesstoken: this.user.accessToken\n        }).then((res) => {\n          // console.log(item)\n          if (res.success) {\n            if (res.action === 'up') {\n              // 由于 JavaScript 的限制，这里不能使用item.ups.length++,\n              // 即不能直接操作数组的长度,也不能利用索引直接设置一个项的值\n              item.ups.push('up')\n              item.is_uped = true\n            } else if (res.action === 'down') {\n              item.ups.pop()\n              item.is_uped = false\n            }\n          }\n        })\n      },\n\n      tip(message) {\n        var timer = null\n        clearTimeout(timer)\n        this.show = true\n        this.message = message\n        timer = setTimeout(() => {\n          this.show = false\n        }, 2000)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"../common/scss/var\";\n  @import \"../common/scss/github-markdown.css\";\n\n  .topic {\n    padding-top: 44px;\n    background: #fff;\n    .title {\n      margin: 10px 15px;\n      padding: 5px;\n      background: #f0f0f0;\n      border-radius: 4px;\n      font-size: 18px;\n      font-weight: bold;\n    }\n    .author-info {\n      display: flex;\n      align-items: center;\n      padding: 10px 15px;\n      font-size: 12px;\n      .avatar {\n        border-radius: 50%;\n      }\n      .center {\n        flex: 1;\n        margin-left: 10px;\n        display: flex;\n        align-items: center;\n        .base {\n          span {\n            display: block;\n          }\n        }\n        .edit {\n          margin-left: 10px;\n          padding: 0 10px;\n          height: 42px;\n          line-height: 42px;\n          background: $color-sub-theme;\n          border-radius: 4px;\n          color: #fff;\n        }\n      }\n      .right {\n        display: flex;\n        align-items: center;\n        .collect {\n          &.cancel {\n            background: #f0f0f0;\n            color: #555;\n          }\n          padding: 0 10px;\n          height: 42px;\n          line-height: 42px;\n          background: $color-theme;\n          border-radius: 4px;\n          color: #fff;\n          font-size: 12px;\n          cursor: pointer;\n        }\n        .visit {\n          flex: 1;\n          margin-left: 10px;\n          span {\n            display: block;\n            text-align: center;\n          }\n        }\n      }\n    }\n    .topic-content {\n      margin: 10px 15px;\n      padding-top: 10px;\n      color: #555;\n      pre {\n        overflow-x: scroll;\n        -webkit-overflow-scrolling: touch;\n      }\n    }\n    .comment-wrapper {\n      margin: 10px 15px;\n    }\n    > h3 {\n      padding: 5px 0;\n      margin: 0 15px;\n      font-size: 16px;\n      border-bottom: $border;\n      b {\n        color: $color-theme;\n      }\n    }\n    .reply-list {\n      margin: 0 15px;\n      li {\n        padding: 10px 0;\n        border-bottom: $border;\n        &:last-child {\n          border-bottom: none;\n        }\n        .base {\n          display: flex;\n          .avatar {\n            border-radius: 50%;\n          }\n          .center {\n            margin-left: 10px;\n            flex: 1;\n            line-height: 20px;\n            .author-name {\n              font-weight: bold;\n            }\n            time {\n              font-size: 12px;\n            }\n          }\n          .floor {\n            font-size: 12px;\n          }\n        }\n        .content {\n          margin-top: 10px;\n          font-size: 14px;\n          color: #555;\n          img {\n            max-width: 100%;\n          }\n          p {\n            margin-bottom: 0;\n          }\n          pre {\n            overflow-x: scroll;\n            -webkit-overflow-scrolling: touch;\n          }\n        }\n        .action {\n          display: flex;\n          align-items: center;\n          justify-content: flex-end;\n          [class*=icon-] {\n            font-size: 20px;\n          }\n          .icon-awesome {\n            margin: 0 20px 0 2px;\n          }\n          .is_uped {\n            color: $color-theme;\n          }\n        }\n      }\n    }\n    .no-reply {\n      padding: 10px 15px;\n      text-align: center;\n    }\n    .comment {\n      &.between {\n        margin-top: 10px;\n      }\n      textarea {\n        width: 100%;\n        display: block;\n        height: 150px;\n        border: 1px solid $color-theme;\n        border-radius: 4px;\n        resize: none;\n        padding: 8px;\n        background: #f5f5f5;\n      }\n      .ctrl {\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        margin-top: 10px;\n        .cancel {\n          margin-right: 20px;\n        }\n        .send {\n          padding: 8px 20px;\n          background: $color-theme;\n          color: #fff;\n          line-height: 1;\n          border-radius: 4px;\n        }\n      }\n    }\n  }\n\n  .comment-enter-active, .comment-leave-active {\n    transition: opacity 0.3s ease;\n  }\n\n  .comment-enter, .comment-leave-to {\n    opacity: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/topic.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"topic\"},[_c('v-header',{attrs:{\"head\":\"主题\"}}),_vm._v(\" \"),(_vm.topic.id)?[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.topic.title))]),_vm._v(\" \"),_c('div',{staticClass:\"author-info\"},[_c('router-link',{attrs:{\"to\":\"/user/topic.author.loginname\"}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.topic.author.avatar_url,\"width\":\"40\",\"height\":\"40\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"base\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.topic.author.loginname))]),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.getLastTime(_vm.topic.create_at)))])]),_vm._v(\" \"),(_vm.topic.author.loginname === _vm.user.name)?_c('router-link',{staticClass:\"edit\",attrs:{\"to\":(\"/topic/\" + (_vm.topic.id) + \"/edit\")}},[_vm._v(\"编辑\\n        \")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[(_vm.user.id)?_c('button',{staticClass:\"collect\",class:{cancel:_vm.topic.is_collect},on:{\"click\":_vm.collectTopic}},[_vm._v(_vm._s(_vm.topic.is_collect? '取消收藏':'收藏')+\"\\n        \")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"visit\"},[_c('tag',{attrs:{\"type\":_vm.getTagInfo(_vm.topic).className,\"text\":_vm.getTagInfo(_vm.topic).text}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.topic.visit_count)+\"次浏览\")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"topic-content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.topic.content)}}),_vm._v(\" \"),(_vm.user.id)?_c('div',{staticClass:\"comment-wrapper\"},[_c('div',{staticClass:\"comment\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.commentContent),expression:\"commentContent\"}],attrs:{\"id\":\"textarea\",\"placeholder\":\"写下你的评论...\"},domProps:{\"value\":(_vm.commentContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.commentContent=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"ctrl\"},[_c('span',{staticClass:\"cancel\",on:{\"click\":_vm.cancelComment}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('button',{staticClass:\"send\",on:{\"click\":function($event){_vm.comment(0,_vm.commentContent)}}},[_vm._v(\"发送\")])])])]):_vm._e(),_vm._v(\" \"),(_vm.topic.replies.length)?[_c('h3',[_c('b',[_vm._v(_vm._s(_vm.topic.replies.length))]),_vm._v(\" 回复\")]),_vm._v(\" \"),_c('ul',{staticClass:\"reply-list\"},_vm._l((_vm.topic.replies),function(item,index){return _c('li',[_c('div',{staticClass:\"base\"},[_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.author.loginname))}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":require(\"../common/image/default_avatar.jpeg\"),\"data-src\":item.author.avatar_url,\"width\":\"40\",\"height\":\"40\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"center\"},[_c('p',{staticClass:\"author-name\"},[_vm._v(_vm._s(item.author.loginname))]),_vm._v(\" \"),_c('time',[_vm._v(_vm._s(_vm.getLastTime(item.create_at)))])]),_vm._v(\" \"),_c('span',{staticClass:\"floor\"},[_vm._v(_vm._s(index+1)+\"楼\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"markdown-body content\",domProps:{\"innerHTML\":_vm._s(item.content)}}),_vm._v(\" \"),_c('div',{staticClass:\"action\"},[_c('span',{staticClass:\"num\",class:{is_uped:item.is_uped}},[_vm._v(_vm._s(item.ups.length?item.ups.length:''))]),_vm._v(\" \"),_c('i',{staticClass:\"icon-awesome\",class:{is_uped:item.is_uped},on:{\"click\":function($event){_vm.ups(item)}}}),_vm._v(\" \"),_c('i',{staticClass:\"icon-reply\",on:{\"click\":function($event){_vm.replyOthers(item)}}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"comment\"}},[(_vm.reply_id === item.id)?_c('div',{staticClass:\"comment between\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replyContent),expression:\"replyContent\"}],attrs:{\"placeholder\":\"写下你的回复...\"},domProps:{\"value\":(_vm.replyContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.replyContent=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"ctrl\"},[_c('span',{staticClass:\"cancel\",on:{\"click\":_vm.cancelReplyOthers}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('button',{staticClass:\"send\",on:{\"click\":function($event){_vm.comment(item.id,_vm.replyContent)}}},[_vm._v(\"发送\")])])]):_vm._e()])],1)}))]:_c('p',{staticClass:\"no-reply\"},[_vm._v(\"暂无回复\")])]:_vm._e(),_vm._v(\" \"),_c('v-alert',{attrs:{\"text\":_vm.message,\"show\":_vm.show}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-63abdd63\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/topic.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-63abdd63\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./topic.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./topic.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./topic.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-63abdd63\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./topic.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/topic.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}