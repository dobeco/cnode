{"version":3,"sources":["webpack:///src/views/edit.vue","webpack:///./src/views/edit.vue?b817","webpack:///./src/views/edit.vue"],"names":["edit","name","components","vHeader","v_header","vAlert","v_alert","data","show","message","title","tab","content","topic_id","this","$route","params","id","computed","extends_default","Object","vuex_esm","created","getTopicDetail","methods","modifyIssue","_this","length","tip","jquery_default","a","post","accesstoken","user","accessToken","then","res","success","setTimeout","$router","push","catch","_this2","timer","clearTimeout","_this3","url","get","views_edit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head","_v","directives","rawName","value","expression","on","change","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","multiple","click","type","placeholder","domProps","input","composing","text","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.8520f8861ceabecd6f88.js","sourcesContent":["<template>\n  <div class=\"edit\">\n    <v-header head=\"编辑主题\"></v-header>\n    <div class=\"line\">\n      <span>选择分类: </span>\n      <select id=\"select-tab\" v-model=\"tab\">\n        <option value=\"share\">分享</option>\n        <option value=\"ask\">问答</option>\n        <option value=\"job\">招聘</option>\n        <option value=\"dev\">测试</option>\n      </select>\n      <button id=\"issue\" @click=\"modifyIssue\">提交</button>\n    </div>\n    <div class=\"title\">\n      <input type=\"text\" v-model=\"title\" placeholder=\"标题,字数10字以上\">\n    </div>\n    <div class=\"content\">\n      <textarea v-model=\"content\" placeholder=\"支持Markdown语法,请注意标记代码\"></textarea>\n    </div>\n    <v-alert :show=\"show\" :text=\"message\"></v-alert>\n  </div>\n</template>\n\n<script>\n  import $ from 'jquery'\n  import {mapState} from 'vuex'\n\n  import vHeader from '../components/v-header'\n  import vAlert from '../components/v-alert'\n\n  export default {\n    name: \"edit\",\n    components: {\n      vHeader, vAlert\n    },\n    data() {\n      return {\n        show: false,\n        message: '',\n        title: '',\n        tab: 'share',\n        content: '',\n        topic_id: this.$route.params.id\n      }\n    },\n    computed: {\n      ...mapState(['user'])\n    },\n    created() {\n      this.getTopicDetail()\n    },\n    methods: {\n      modifyIssue() {\n        if (this.title.length <= 10) {\n          this.tip('标题字数10字以上')\n        } else if (!this.content.length) {\n          this.tip('主题内容不能为空')\n        } else {\n          var url = `https://cnodejs.org/api/v1/topics/update`\n          $.post(url, {\n            accesstoken: this.user.accessToken,\n            title: this.title,\n            tab: this.tab,\n            content: this.content,\n            topic_id: this.topic_id\n          }).then((res) => {\n            if (res.success) {\n              this.tip('主题修改成功')\n              setTimeout(() => {\n                this.$router.push(`/?tab=${this.tab}`)\n              }, 2000)\n            }\n          }).catch(() => {\n            this.tip('阿欧~,服务器抽风了!')\n          })\n        }\n      },\n      tip(message) {\n        var timer = null\n        clearTimeout(timer)\n        this.message = message\n        this.show = true\n        timer = setTimeout(() => {\n          this.show = false\n        }, 2000)\n      },\n      getTopicDetail() {\n        var topicId = this.$route.params.id\n        var url = `https://cnodejs.org/api/v1/topic/${topicId}?mdrender=false`\n        $.get(url).then((res) => {\n          // console.log(res)\n          if (res.success) {\n            this.title = res.data.title\n            this.tab = res.data.tab\n            this.content = res.data.content\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"../common/scss/var\";\n\n  .edit {\n    background: #fff;\n    padding-top: 44px;\n    .line {\n      margin: 10px 15px;\n      display: flex;\n      align-items: center;\n      #select-tab {\n        flex: 1;\n        margin: 0 10px;\n        padding-left: 30px;\n        border: 1px solid $color-theme;\n        height: 30px;\n        border-radius: 4px;\n      }\n      #issue {\n        padding: 5px 20px;\n        background: $color-theme;\n        color: #fff;\n        border-radius: 4px;\n      }\n    }\n    .title {\n      margin: 20px 15px;\n      border-top: $border;\n      border-bottom: $border;\n      input[type=text] {\n        display: block;\n        width: 100%;\n        padding: 10px 0;\n        font-weight: bold;\n        font-style: italic;\n      }\n    }\n    .content {\n      margin: 0 15px;\n      textarea {\n        width: 100%;\n        height: 400px;\n        background: #f0f0f0;\n        border-radius: 5px;\n        border: 1px solid $color-theme;\n        padding: 8px;\n        resize: none;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"edit\"},[_c('v-header',{attrs:{\"head\":\"编辑主题\"}}),_vm._v(\" \"),_c('div',{staticClass:\"line\"},[_c('span',[_vm._v(\"选择分类: \")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tab),expression:\"tab\"}],attrs:{\"id\":\"select-tab\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tab=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"share\"}},[_vm._v(\"分享\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"ask\"}},[_vm._v(\"问答\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"job\"}},[_vm._v(\"招聘\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"dev\"}},[_vm._v(\"测试\")])]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"issue\"},on:{\"click\":_vm.modifyIssue}},[_vm._v(\"提交\")])]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],attrs:{\"type\":\"text\",\"placeholder\":\"标题,字数10字以上\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"placeholder\":\"支持Markdown语法,请注意标记代码\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_vm._v(\" \"),_c('v-alert',{attrs:{\"show\":_vm.show,\"text\":_vm.message}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a19b2f2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a19b2f2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a19b2f2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}